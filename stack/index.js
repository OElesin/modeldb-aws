#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const vpc_stack_1 = require("./lib/vpc-stack");
const rds_stack_1 = require("./lib/rds-stack");
const ecs_stack_1 = require("./lib/ecs-stack");
const cdk = require("@aws-cdk/core");
const app = new cdk.App();
const vpcStack = new vpc_stack_1.VpcStack(app, 'ml-base-infra-stack');
const rdsStack = new rds_stack_1.RDSStack(app, 'modeldb-rds-stack', {
    vpc: vpcStack.vpc,
    username: 'postgres',
    databaseName: 'postgres',
    port: 5432,
});
rdsStack.addDependency(vpcStack);
const ecsStack = new ecs_stack_1.ECSStack(app, 'modeldb-ecs-cluster-stack', {
    vpc: vpcStack.vpc,
    dbUsername: 'postgres'
});
ecsStack.addDependency(rdsStack);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx1Q0FBcUM7QUFDckMsK0NBQXlDO0FBQ3pDLCtDQUF5QztBQUN6QywrQ0FBeUM7QUFDekMscUNBQXNDO0FBRXRDLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBRTFCLE1BQU0sUUFBUSxHQUFHLElBQUksb0JBQVEsQ0FBQyxHQUFHLEVBQUUscUJBQXFCLENBQUcsQ0FBQztBQUU1RCxNQUFNLFFBQVEsR0FBRyxJQUFJLG9CQUFRLENBQUMsR0FBRyxFQUFFLG1CQUFtQixFQUFFO0lBQ3BELEdBQUcsRUFBRSxRQUFRLENBQUMsR0FBRztJQUNqQixRQUFRLEVBQUUsVUFBVTtJQUNwQixZQUFZLEVBQUUsVUFBVTtJQUN4QixJQUFJLEVBQUUsSUFBSTtDQUNiLENBQUMsQ0FBQztBQUNILFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7QUFFakMsTUFBTSxRQUFRLEdBQUcsSUFBSSxvQkFBUSxDQUFDLEdBQUcsRUFBRSwyQkFBMkIsRUFBRTtJQUM1RCxHQUFHLEVBQUUsUUFBUSxDQUFDLEdBQUc7SUFDakIsVUFBVSxFQUFFLFVBQVU7Q0FDekIsQ0FBQyxDQUFDO0FBQ0gsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJztcbmltcG9ydCB7VnBjU3RhY2t9IGZyb20gJy4vbGliL3ZwYy1zdGFjayc7XG5pbXBvcnQge1JEU1N0YWNrfSBmcm9tICcuL2xpYi9yZHMtc3RhY2snO1xuaW1wb3J0IHtFQ1NTdGFja30gZnJvbSAnLi9saWIvZWNzLXN0YWNrJztcbmltcG9ydCBjZGsgPSByZXF1aXJlKCdAYXdzLWNkay9jb3JlJyk7XG5cbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG5cbmNvbnN0IHZwY1N0YWNrID0gbmV3IFZwY1N0YWNrKGFwcCwgJ21sLWJhc2UtaW5mcmEtc3RhY2snLCApO1xuXG5jb25zdCByZHNTdGFjayA9IG5ldyBSRFNTdGFjayhhcHAsICdtb2RlbGRiLXJkcy1zdGFjaycsIHtcbiAgICB2cGM6IHZwY1N0YWNrLnZwYyxcbiAgICB1c2VybmFtZTogJ3Bvc3RncmVzJyxcbiAgICBkYXRhYmFzZU5hbWU6ICdwb3N0Z3JlcycsXG4gICAgcG9ydDogNTQzMixcbn0pO1xucmRzU3RhY2suYWRkRGVwZW5kZW5jeSh2cGNTdGFjayk7XG5cbmNvbnN0IGVjc1N0YWNrID0gbmV3IEVDU1N0YWNrKGFwcCwgJ21vZGVsZGItZWNzLWNsdXN0ZXItc3RhY2snLCB7XG4gICAgdnBjOiB2cGNTdGFjay52cGMsXG4gICAgZGJVc2VybmFtZTogJ3Bvc3RncmVzJ1xufSk7XG5lY3NTdGFjay5hZGREZXBlbmRlbmN5KHJkc1N0YWNrKTsiXX0=